<!DOCTYPE html>

<html lang="en">

        <head>
                <!-- Page information -->
                <meta charset="UTF-8" />
                <meta name="node_id" content="dice rolls">
                <meta name="viewport" content="width=device-width, initial-scale=1.0" />
                <link rel="shortcut icon" href="/favicon.ico" />

                <!-- Set title -->
                <title>Isekai_Chronicles/Notes</title>

                <!-- Includes -->
                
<script src="../obs.html/static/obsidian_core.js"></script>
<script src="../obs.html/static/encoding.js"></script>
<link rel="stylesheet" href="../obs.html/static/master.css" />
<script src="../obs.html/static/mermaid.9.0.1.min.js"></script>
<script>
  MathJax = {
    loader: {
      load: [
        '[tex]/action',
        'output/chtml',
        '[tex]/centernot'
      ]
    },
    tex: {
      inlineMath: [ ["\\(","\\)"] ],
      displayMath: [ ["\\[","\\]"] ],
      processEscapes: true,
      processEnvironments: true,
      packages: {'[+]': ['centernot']}
    }
  };
</script>
<script type="text/javascript" id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script>
<script src="../obs.html/static/flexsearch.bundle.js"></script>
<script src="../obs.html/static/pako.js"></script>
<script src="../obs.html/static/search.js"></script>
<script src="../obs.html/static/dirtree.js"></script>


                <!-- Onload tweaks -->
                <script>
                        const CURRENT_NODE = 'dice rolls';
                        const HTML_URL_PREFIX = '..';
                        const PAGE_DEPTH = 1;
                </script>
        </head>

<body class="theme-obs-light">
        <div id="antiflash" style="display: none;"></div>
        <script>
                document.getElementById('antiflash').style.display = 'block';
        </script>
        <div id="search-master-div">
    <div id="search-slab" king_ramses="return the slaaab">
            <div id="search-controls">
                    <input id="search_string" placeholder="Type to search notes" type="text" />
                    <div class="tooltip" style="display: none;">
                        <input type="checkbox" id="hard_search" name="hard" />
                        <span class="tooltiptext">Hard search (require exact match)</span>
                    </div>
                    <div id="search-results-box">
                        <div id="search-results"></div>
                    </div>
                    <div id="search-instructions">
                        <div class="prompt-instruction">
                                <b>esc</b> to dismiss
                        </div>
                    </div>
            </div>
    </div>
</div>

<script>
    document.getElementById("search-master-div").addEventListener('click', e => {
            if(e.target !== e.currentTarget){
                    return
            }
            toggle_id('search-master-div');
    })
    document.getElementById("search_string").addEventListener("input", function(event) {
            setTimeout( () =>run_search('search_string', 'hard_search'), 100 );
    }); 
    document.getElementById("hard_search").addEventListener("click", function(event) {
            setTimeout( () =>run_search('search_string', 'hard_search'), 100 );
    });

    window.addEventListener('keydown', e => {
        if((e.key=='Escape'||e.key=='Esc'||e.keyCode==27)){
            toggle_id('search-master-div');
            return false;
        } 
    }, true);

    function click_list_link(element){
        element.parentElement.getElementsByTagName('a')[0].click()
    }
</script>

        <div id="page_holder" class="flex_col">
                <div id="header" class="header">
                        <div id="header_flex" class="flex_row">
                                <a href="../index.html" id="homelink" title="Clear screen and go to homepage">Isekai_Chronicles/Notes</a>
                                <div id="menu_toggle_button" class="navbar-button requires_js" onclick="toggle_menu()">
                                        ≡
                                </div>
                                <div id="navbar" class="navbar requires_js">
                                        
                                        <div class="icon-tray">
                                                <div id="theme-button" class="theme-button requires_js" title="Change theme" onclick="toggle_theme_popup(this)">
    T
</div>
<script>
    function toggle_theme_popup(el){
        // make theme button show that it's active by adding the .active class
        toggle(el);

        // show the theme selector
        toggle_id('theme-popup')

        let h2 = document.getElementById('header2')
        if (h2){
            let pu = document.getElementById('header2').getElementsByClassName('popup')[0];
            toggle(pu);
        }
    }

    function disable_theme_popup(){
        disable_id('theme-button');

        // show the theme selector
        disable_id('theme-popup')

        let h2 = document.getElementById('header2')
        if (h2){
            let pu = document.getElementById('header2').getElementsByClassName('popup')[0];
            disable(pu);
        }
    }
</script>
                                                        <div onclick="openSearch()" class="theme-button requires_js">
                <img src = "../obs.html/static/search.svg" alt="Search notes" title="Search notes" style="margin: 4px;"/>
        </div>
        <script>
                function openSearch(){
                        // toggle search popup and continue with extra code if it is enabled this time
                        if (toggle_id('search-master-div')){
                                // clear input and put focus on it so that we can start typing immediately
                                let ss = document.getElementById('search_string');
                                ss.value = '';
                                ss.focus()
                                ss.select()
                        }
                }
        </script>
                                                        <div class="graph_header_div requires_js">
            <a id="graph_link" class="system-link" href="../obs.html/graph/index.html?node=dice rolls" title="Open fullpage Graph">
                    <img class="graph_header_div_svg" src = "../obs.html/static/graph.svg" alt="Open fullpage Graph" style="margin: 2px; width: 17px;"/>
            </a>
        </div>
                                                        <div >
            <a id="dirtree_link" class="system-link" href="../obs.html/dir_index.html" title="View directory tree">
                    <img src = "../obs.html/static/dirtree.svg" style="width: 12px; padding: 4px;" alt="Directory tree link"/>
            </a>
        </div>
                                                <div>
    <a href="../obs.html/tags/index.html" title="Open tag view">
            <img src = "../obs.html/static/hashtag.svg" alt="RSS Feed link" style="width: 24px; margin-left: -2px; margin-top: -2px;"/>
    </a>
</div>
                                                
                                        </div>
                                        <div style="display: flex; flex-direction:column">
                                                <div id="left_pane_toggle_nav" class="left_pane_toggle_nav">Toggle Directory Tree Pane</div>
                                                <div id="right_pane_toggle_nav" class="right_pane_toggle_nav">Toggle Table of Contents Pane</div>
                                        </div>
                                </div>
                        </div>
                        <div class="popup" id="theme-popup">
    <label for="cars">Theme </label>

    <select name="theme" id="theme" onchange="set_theme(this.value)">
      <option value="light">light</option>
      <option value="obs-light" selected="selected">obsidian-light</option>
      <option value="obs-dark">obsidian-dark</option>
    </select> 
</div>
                </div>
                <div class="flex_row">
                        <div id="left_pane" class="left_pane active">
                                <div id="left_pane_fold_header" class="left_pane_fold_header fold_header">x</div>
                                <div id="left_pane_content" class="left_pane_content">
                                        <button id="folder-1" class="dir-button" onclick="toggle_dir(this.id)">Deprecated</button>
<div id="folder-container-1" class="dir-container requires_js " path="/Deprecated">
	<button id="folder-2" class="dir-button" onclick="toggle_dir(this.id)">Fighting Styles</button>
	<div id="folder-container-2" class="dir-container requires_js " path="/Deprecated/Fighting Styles">
		<button id="folder-3" class="dir-button" onclick="toggle_dir(this.id)">Outdated</button>
		<div id="folder-container-3" class="dir-container requires_js " path="/Deprecated/Fighting Styles/Outdated">
			<ul class="dir-list">
				<li><a class="" href="/Deprecated/Fighting Styles/Outdated/Fang of the Frenzied Pack.html"  >Fang of the Frenzied Pack</a></li>
				<li><a class="" href="/Deprecated/Fighting Styles/Outdated/Flail of the Spreading Plague.html"  >Flail of the Spreading Plague</a></li>
				<li><a class="" href="/Deprecated/Fighting Styles/Outdated/Lash of the Rampant Growth.html"  >Lash of the Rampant Growth</a></li>
			</ul>
		</div>
		<ul class="dir-list">
			<li><a class="" href="/Deprecated/Fighting Styles/Blade of Phantsmal Frost.html"  >Blade of Phantsmal Frost</a></li>
			<li><a class="" href="/Deprecated/Fighting Styles/Fist of the Shaking Mountain.html"  >Fist of the Shaking Mountain</a></li>
			<li><a class="" href="/Deprecated/Fighting Styles/Hammer of the Raging Flame.html"  >Hammer of the Raging Flame</a></li>
			<li><a class="" href="/Deprecated/Fighting Styles/Javelin of Rolling Thunder.html"  >Javelin of Rolling Thunder</a></li>
			<li><a class="" href="/Deprecated/Fighting Styles/Scythe of the Sweeping Wind.html"  >Scythe of the Sweeping Wind</a></li>
			<li><a class="" href="/Deprecated/Fighting Styles/Spear of the Crashing Waves.html"  >Spear of the Crashing Waves</a></li>
			<li><a class="" href="/Deprecated/Fighting Styles/Template.html"  >Template</a></li>
		</ul>
	</div>
	<ul class="dir-list">
		<li><a class="" href="/Deprecated/Deprecated.html"  >Deprecated</a></li>
	</ul>
</div>
<button id="folder-4" class="dir-button" onclick="toggle_dir(this.id)">System</button>
<div id="folder-container-4" class="dir-container requires_js " path="/System">
	<button id="folder-5" class="dir-button" onclick="toggle_dir(this.id)">Combat</button>
	<div id="folder-container-5" class="dir-container requires_js " path="/System/Combat">
		<button id="folder-6" class="dir-button" onclick="toggle_dir(this.id)">Fighting Styles</button>
		<div id="folder-container-6" class="dir-container requires_js " path="/System/Combat/Fighting Styles">
			<ul class="dir-list">
				<li><a class="" href="/System/Combat/Fighting Styles/Blade of the Raging Flame.html"  >Blade of the Raging Flame</a></li>
				<li><a class="" href="/System/Combat/Fighting Styles/Crossbow of the Roaring Sky.html"  >Crossbow of the Roaring Sky</a></li>
				<li><a class="" href="/System/Combat/Fighting Styles/Lash of the Rampant Growth.html"  >Lash of the Rampant Growth</a></li>
				<li><a class="" href="/System/Combat/Fighting Styles/Scythe of the Sweeping Wind.html"  >Scythe of the Sweeping Wind</a></li>
				<li><a class="" href="/System/Combat/Fighting Styles/Shield of the Jagged Peaks.html"  >Shield of the Jagged Peaks</a></li>
				<li><a class="" href="/System/Combat/Fighting Styles/Spear of the Crashing Waves.html"  >Spear of the Crashing Waves</a></li>
			</ul>
		</div>
		<ul class="dir-list">
			<li><a class="" href="/System/Combat/Combat.html"  >Combat</a></li>
			<li><a class="" href="/System/Combat/Conditions.html"  >Conditions</a></li>
			<li><a class="" href="/System/Combat/Fighting Style.html"  >Fighting Style</a></li>
			<li><a class="" href="/System/Combat/Limit Break.html"  >Limit Break</a></li>
			<li><a class="" href="/System/Combat/Soul Forging.html"  >Soul Forging</a></li>
		</ul>
	</div>
	<button id="folder-7" class="dir-button" onclick="toggle_dir(this.id)">Skills</button>
	<div id="folder-container-7" class="dir-container requires_js " path="/System/Skills">
		<ul class="dir-list">
			<li><a class="" href="/System/Skills/General Skills.html"  >General Skills</a></li>
			<li><a class="" href="/System/Skills/Special Skills.html"  >Special Skills</a></li>
		</ul>
	</div>
	<ul class="dir-list">
		<li><a class="" href="/System/Bestiary.html"  >Bestiary</a></li>
		<li><a class="" href="/System/Character Creation.html"  >Character Creation</a></li>
		<li><a class="" href="/System/Character Progression.html"  >Character Progression</a></li>
		<li><a class="" href="/System/Characteristics and Skills.html"  >Characteristics and Skills</a></li>
		<li><a class="" href="/System/Dice Rolls.html"  >Dice Rolls</a></li>
		<li><a class="" href="/System/Enemies.html"  >Enemies</a></li>
		<li><a class="" href="/System/Races.html"  >Races</a></li>
		<li><a class="" href="/System/Traits.html"  >Traits</a></li>
	</ul>
</div>
<button id="folder-8" class="dir-button" onclick="toggle_dir(this.id)">Worldbuilding</button>
<div id="folder-container-8" class="dir-container requires_js " path="/Worldbuilding">
	<button id="folder-9" class="dir-button" onclick="toggle_dir(this.id)">PNJ</button>
	<div id="folder-container-9" class="dir-container requires_js " path="/Worldbuilding/PNJ">
		<button id="folder-10" class="dir-button" onclick="toggle_dir(this.id)">Antagonistes</button>
		<div id="folder-container-10" class="dir-container requires_js " path="/Worldbuilding/PNJ/Antagonistes">
			<button id="folder-11" class="dir-button" onclick="toggle_dir(this.id)">Bandits des Montagnes</button>
			<div id="folder-container-11" class="dir-container requires_js " path="/Worldbuilding/PNJ/Antagonistes/Bandits des Montagnes">
				<ul class="dir-list">
					<li><a class="" href="/Worldbuilding/PNJ/Antagonistes/Bandits des Montagnes/Bandits des Montagnes.html"  >Bandits des Montagnes</a></li>
					<li><a class="" href="/Worldbuilding/PNJ/Antagonistes/Bandits des Montagnes/Jaya, Prince Bandit.html"  >Jaya, Prince Bandit</a></li>
				</ul>
			</div>
			<ul class="dir-list">
				<li><a class="" href="/Worldbuilding/PNJ/Antagonistes/Boss Final.html"  >Boss Final</a></li>
			</ul>
		</div>
		<button id="folder-12" class="dir-button" onclick="toggle_dir(this.id)">Instant Bullets</button>
		<div id="folder-container-12" class="dir-container requires_js " path="/Worldbuilding/PNJ/Instant Bullets">
			<ul class="dir-list">
				<li><a class="" href="/Worldbuilding/PNJ/Instant Bullets/Création.html"  >Création</a></li>
				<li><a class="" href="/Worldbuilding/PNJ/Instant Bullets/Empathie.html"  >Empathie</a></li>
				<li><a class="" href="/Worldbuilding/PNJ/Instant Bullets/Instant Bullets.html"  >Instant Bullets</a></li>
			</ul>
		</div>
		<button id="folder-13" class="dir-button" onclick="toggle_dir(this.id)">Les Faucons de l'Ouest</button>
		<div id="folder-container-13" class="dir-container requires_js " path="/Worldbuilding/PNJ/Les Faucons de l'Ouest">
			<ul class="dir-list">
				<li><a class="" href="/Worldbuilding/PNJ/Les Faucons de l'Ouest/Faucons de l'Ouest.html"  >Faucons de l'Ouest</a></li>
			</ul>
		</div>
		<ul class="dir-list">
			<li><a class="" href="/Worldbuilding/PNJ/The Man with a Mission.html"  >The Man with a Mission</a></li>
		</ul>
	</div>
	<ul class="dir-list">
		<li><a class="" href="/Worldbuilding/Malaise.html"  >Malaise</a></li>
		<li><a class="" href="/Worldbuilding/Monstres.html"  >Monstres</a></li>
		<li><a class="" href="/Worldbuilding/Univers.html"  >Univers</a></li>
	</ul>
</div>
<ul class="dir-list">
	<li><a class="" href="/Idées en vrac bis.html"  >Idées en vrac bis</a></li>
	<li><a class="" href="/Problème.html"  >Problème</a></li>
	<li><a class="" href="/README.html"  >README</a></li>
	<li><a class="" href="/Reordering spells.html"  >Reordering spells</a></li>
	<li><a class="" href="/index.html"  >index</a></li>
</ul>

                                </div>
                        </div>
                        <div class="container">
                                <h1 id="standard-dice-rolls">Standard Dice Rolls</h1>
<div class="toc">
<ul>
<li><a href="#standard-dice-rolls" class="anchor-link">Standard Dice Rolls</a><ul>
<li><a href="#risks-and-modulation" class="anchor-link">Risks and Modulation</a><ul>
<li><a href="#risky-rolls" class="anchor-link">Risky Rolls</a></li>
<li><a href="#modulation" class="anchor-link">Modulation</a></li>
<li><a href="#taking-risks" class="anchor-link">Taking Risks</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#extended-dice-rolls" class="anchor-link">Extended Dice Rolls</a><ul>
<li><a href="#attempt-limit" class="anchor-link">Attempt Limit</a></li>
</ul>
</li>
</ul>
</div>
<p>Most <strong>Dice Rolls</strong> ask for a <strong>Skill</strong> and a <strong>Characteristic</strong>.   </p>
<ol>
<li>Initialize total at <strong>Skill Level</strong> + <strong>Characteristic Level</strong> + any applicable Bonus :   </li>
<li>Throw 2d10   </li>
<li>If both dice show the same result : <br />
        1. Double 0 : Congratulations, you rolled a Critical Failure. Jump to last step, your total becomes 0 <br />
        2. Double X (X <span class="arithmatex">\(\neq\)</span> 0) : Congratulations, you did a Critical success. Add X to your total and loop back to step 2   </li>
<li>Add absolute value of the difference to your total   </li>
<li>Proudly announce your total   </li>
</ol>
<p>If total is above the <strong>Difficulty</strong> of the <strong>Skill Check</strong>, congratulations, it's a success!   </p>
<h2 id="risks-and-modulation">Risks and Modulation</h2>
<p>We invite the reader to read the following page <a href="https://artefact.swynfel.eu/w/randompg/a/view/87" class="external-link">https://artefact.swynfel.eu/w/randompg/a/view/87</a> to understand the dice rolls in this system and he philosophy behind it.   </p>
<h3 id="risky-rolls">Risky Rolls</h3>
<p>Some <strong>Dice Rolls</strong> come with inherent risks, i.e. complications that are not incompatible with the success of the <strong>Dice Roll</strong> and not linked to he failure. <br />
For us,  a <strong>Dice Roll</strong> failure means a lack of progression, and complications/risks are orthogonal to this. <br />
Whenever a <strong>Dice Roll</strong> involves such orthogonal risks of complication, the GM gives a <strong>Risk Threshold</strong> to the <strong>Skill Check</strong> associated with a <strong>Consequence</strong>. Whatever the total of your <strong>Skill Check</strong> is, if the value you rolled on the Dice is lower than the value of the <strong>Risk Threshold</strong>, you automatically trigger the consequence.   </p>
<h3 id="modulation">Modulation</h3>
<p>Of course this would be purely one-sided if players did not have any means of interacting with the risk. That is why can then <strong>Modulate</strong> the risk : before rolling the dice, they can chose to suffer a modifier (positive or negative) to their <strong>Dice Roll</strong> (up to the level of the <strong>Skill</strong> they use to mitigate) to increase the Risk Threshold by the same amount.   </p>
<p><a class="inline-tag" href="../obs.html/tags/example/index.html">example</a> Let's say for example your are snooping around in your rival's office fro information. This calls for a <strong>Scrutiny + Instincts Skill Check</strong>. Here a <strong>Dice Roll</strong> success means getting the information and failure is the lack of progression in your quest for knowledge. But not finding the information is not the only thing that could go poorly, you could also leave some traces of your passage. The GM could have you roll a stealth check or another dice check but this is not really elegant and misses something crucial (at least in our books) : the stealthiness of the search can be directly tied to its effectiveness. <br />
Indeed, not taking care of leaving traces means a greater freedom in your actions and reciprocally, being careful not to leave traces might prevent you from getting a good look around. <br />
That is why the GM should add a <strong>Risk</strong> to the <strong>Scrutiny</strong> Skill Check. The consequence being that your rival notices your passage. This risk is directly tied to the rival's Awareness, so the GM decides to give a <strong>Risk Threshold</strong> equal to the rival's <strong>Awareness Skill</strong>. As for <strong>Mitigation</strong>, the GM rules that the <strong>Sleight of Hand</strong> skill makes the most sense in this situation to be used as a Risk Mitigation Skill. <br />
Thus the GM makes his final call of a <strong>Scrutiny + Instincts</strong> <em>Risky</em> Skill Check. Risk (Rival's Awareness) : Notice player's presence. Mitigated by Sleight of Hand.   </p>
<p>Of course it is up to the GM to announce if there is a Risk or to state the true value of the Risk threshold. While the latter can be justified (you don't know the rivals awareness), taking your players by surprise by hiding the risk might leave a bitter after taste.   </p>
<h3 id="taking-risks">Taking Risks</h3>
<p>Players might also voluntarily turn <strong>Dice Rolls</strong> into <a href="../System/Dice Rolls.html#risky-rolls">Dice Rolls#Risky Rolls</a> by taking risks. In order to do this, player and GM MUST clearly define the risk that the player is taking and the consequences. We remind you that these consequences MUST be compatible with the success of the Dice Roll. And these consequences MUST exist because otherwise what is the risk taken. <br />
The GM chooses a <a href="../System/Dice Rolls.html#modulation">Modulation</a> Skill and announces a <strong>Risky Dice Roll</strong> with <strong>Risk Threshold (0)</strong> and <strong>Modulated</strong> by the chosen skill.   </p>
<h1 id="extended-dice-rolls">Extended Dice Rolls</h1>
<p>Used for crafting, for longer actions where some small failures are tolerated, but at a cost, and where overall success is but a question of time and tries. Usually used when the time taken to perform the action (as well as the additional cost) are important. <br />
(Clever use of <a href="../System/Dice Rolls.html#standard-dice-rolls">Dice Rolls#Standard Dice Rolls</a> can replace <a href="../System/Dice Rolls.html#extended-dice-rolls">Dice Rolls#Extended Dice Rolls</a> but are more tricky to play out right and don't give the same feeling)   </p>
<p>All <strong>Extended Dice Roll</strong> come with a given <strong>Difficulty</strong>, <strong>Time Interval</strong>, <strong>Additional Cost</strong>. <br />
Each <strong>Time Interval</strong>, the character spend the <strong>Additional Cost</strong> and makes a <strong>Standard Dice Roll</strong>, every point of the result above the <strong>Difficulty</strong> adds to his total. Whenever the total exceeds the <strong>Difficulty</strong>, the test is considered a success.   </p>
<h2 id="attempt-limit">Attempt Limit</h2>
<p>An alternative version of the Extended Dice Roll is particularly appropriate for some Social Encounters by adding an <strong>Attempt Limit</strong>. The same rules apply except that the roll must succeed in less than <strong>Attempt Limit</strong> steps, otherwise it is considered a failure. <br />
GMs should allow player to increase the <strong>Attempt Limit</strong> at any time by giving away some information they wanted to keep secret or by abusing of their hosts generosity (of course, this should have consequences). <br />
This is a good and natural way of recompensing players for figuring out what is of interest for the other party and making efforts in getting that information.</p>
<div class="note-footer">
<div class="tags">
<h2>Tags</h2>
<ul>
	<li><a class="backlink" href="../obs.html/tags/example/index.html">example</a></li>
</ul>
</div>

</div>
<div class="graph requires_js ">
    <div id="A54362255446263999468848722903192265318{level}" class="graph_div"></div>
    
    <div class="graph-button-row" style="display:flex;">
        <button class="graph_button graph_show_button" id="B54362255446263999468848722903192265318{level}" level="{level}" note_temp_id="54362255446263999468848722903192265318" onclick="window.ObsHtmlGraph.run(this, '54362255446263999468848722903192265318', 'dice rolls');">
            Show Graph
        </button>
        <button class="graph_button graph_type_button" id="C54362255446263999468848722903192265318{level}" style="flex:1" onclick="window.ObsHtmlGraph.switch_graph_type(this);">
            2D
        </button>
    </div>
</div>

<script type="module">
    if (window.ObsHtmlGraph == undefined){
        import('../obs.html/static/graph.js').then((Module) => {
            window.ObsHtmlGraph = Module;
            window.ObsHtmlGraph.arm_page(document.getElementById('page_holder'))
        })
    }
</script>




                                <!-- end content -->
                        </div>
                        <div class="container_filler">
                        </div>
                        <div id="right_pane" class="right_pane active">
                                <div id="right_pane_fold_header" class="right_pane_fold_header fold_header">x</div>
                                <div id="right_pane_content" class="right_pane_content">
                                        
                                </div>
                        </div>
                </div>
        </div>

        <script>
                function handle_toggle_side_bar(e){
                        let header;
                        let pane; 
                        let target = e.target

                        // switch out the navbar button click for a header click
                        if (target.id == 'left_pane_toggle_nav'){
                                target = document.getElementById('left_pane_fold_header')
                        }
                        else if (target.id == 'right_pane_toggle_nav'){
                                target = document.getElementById('right_pane_fold_header')
                        }

                        // get header and pane
                        if (target.classList.contains('fold_header')) {
                                header = target;
                                pane = target.parentElement;
                        }
                        else {
                                pane = target;
                                header = target.getElementsByClassName('fold_header')[0];
                        }
                        toggle_side_bar(pane, header, true)
                        e.stopPropagation();
                }
                function handle_toggle_side_bar_button(e){
                        document.getElementById('menu_toggle_button').click()
                        handle_toggle_side_bar(e);
                }

                function toggle_side_bar(pane, header, save) {
                        let active = (pane.classList.contains('active'))
                        if (active){
                                disable_side_bar(pane, header, save);
                        }
                        else {
                                enable_side_bar(pane, header, save);
                        }
                }
                function enable_side_bar(pane, header, save){
                        pane.classList.add('active');
                        pane.removeEventListener('click', handle_toggle_side_bar);
                        header.addEventListener('click', handle_toggle_side_bar);
                        set_correct_header_symbol(header);
                        if (save){ save_panel_folding_state(header, true) }
                }
                function disable_side_bar(pane, header, save){
                        pane.classList.remove('active');
                        pane.addEventListener('click', handle_toggle_side_bar);
                        header.removeEventListener('click', handle_toggle_side_bar);
                        set_correct_header_symbol(header);
                        if (save){ save_panel_folding_state(header, false) }
                }
                function set_correct_header_symbol(header){
                        let pane = header.parentElement;
                        let symbol = [['>', '<'],['<', '>']]
                        symbol = symbol[Number(header.classList.contains('right_pane_fold_header'))][Number(pane.classList.contains('active'))];
                        console.log(symbol);
                        header.innerHTML = symbol
                        return header;
                }
                function panel_folding_get_panel_name(header){
                        return ['left', 'right'][Number(header.classList.contains('right_pane_fold_header'))]
                }
                function save_panel_folding_state(header, active){
                        localStorage.setItem('pane_folding_state_'+panel_folding_get_panel_name(header), Number(active));
                }
                function load_panel_folding_state(panel_name){
                        val = localStorage.getItem('pane_folding_state_'+panel_name)
                        if (!val){ return {'exists': false, 'value': null}}
                        return {'exists': true, 'value': Boolean(Number(val))}
                }
                function set_pane_folding_start(left_header, right_header){
                        // small screen = closed
                        let right_pane_enabled = true;
                        let left_pane_enabled = true;
                        let w = window.visualViewport.width
                        if (w < 1000){
                                left_pane_enabled = false
                        }
                        if (w < 800){
                                right_pane_enabled = false
                        }

                        // get saved values if present
                        let rval = load_panel_folding_state('right')
                        if (rval['exists']){
                                right_pane_enabled = rval['value']
                        }
                        let lval = load_panel_folding_state('left')
                        if (lval['exists']){
                                left_pane_enabled = lval['value']
                        }

                        // default = enabled, so we only need to disable
                        if (!left_pane_enabled){
                                disable_side_bar(document.getElementById('left_pane'), document.getElementById('left_pane_fold_header'))
                        }
                        if (!right_pane_enabled){
                                disable_side_bar(document.getElementById('right_pane'), document.getElementById('right_pane_fold_header'))
                        }
                }

                function init_pane_folding(header){
                        set_correct_header_symbol(header);
                        header.addEventListener('click', handle_toggle_side_bar);
                }
                
                
                set_pane_folding_start()
                init_pane_folding(document.getElementById('left_pane_fold_header'));
                init_pane_folding(document.getElementById('right_pane_fold_header'));

                document.getElementById('left_pane_toggle_nav').addEventListener('click', handle_toggle_side_bar_button);
                document.getElementById('right_pane_toggle_nav').addEventListener('click', handle_toggle_side_bar_button);
        </script>

        <script src="../obs.html/static/load_dirtree_footer.js" type="text/javascript"></script>

        




</body>
</html>
